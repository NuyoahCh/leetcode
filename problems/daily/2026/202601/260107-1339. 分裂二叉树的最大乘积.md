# 官方链接
https://leetcode.cn/problems/maximum-product-of-splitted-binary-tree/description/?envType=daily-question&envId=2026-01-07

## 题解
https://leetcode.cn/problems/maximum-product-of-splitted-binary-tree/solutions/3875097/gomei-ri-yi-ti-by-code-review-qzpc/

## Code
```go
/**
 * Definition for a binary tree node.
 * type TreeNode struct {
 *     Val int
 *     Left *TreeNode
 *     Right *TreeNode
 * }
 */
func maxProduct(root *TreeNode) int {
    // 先利用求和函数得到整棵树的节点之和
    treeSum := getTreeSum(root)
    // 再次调用，利用后序位置计算子树之积
    res := int64(0)
    getSum(root, treeSum, &res)
    return int(res % (1e9 + 7))
}

func getTreeSum(root *TreeNode) int {
    if root == nil {
        return 0
    }
    return root.Val + getTreeSum(root.Left) + getTreeSum(root.Right)
}

func getSum(root *TreeNode, treeSum int, res *int64) int {
    if root == nil {
        return 0
    }
    leftSum := getSum(root.Left, treeSum, res)
    rightSum := getSum(root.Right, treeSum, res)
    rootSum := leftSum + rightSum + root.Val
    if res != nil {
        // 后序位置计算乘积
        *res = max(*res, int64(rootSum)*(int64(treeSum)-int64(rootSum)))
    }
    return rootSum
}

func max(a, b int64) int64 {
    if a > b {
        return a
    }
    return b
}
```