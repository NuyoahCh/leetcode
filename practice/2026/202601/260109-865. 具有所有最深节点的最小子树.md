# 官方链接
https://leetcode.cn/problems/smallest-subtree-with-all-the-deepest-nodes/description/?envType=daily-question&envId=2026-01-09

## 题解
https://leetcode.cn/problems/smallest-subtree-with-all-the-deepest-nodes/solutions/3876283/gomei-ri-yi-ti-by-code-review-ae3u/

## Code
```go
/**
 * Definition for a binary tree node.
 * type TreeNode struct {
 *     Val int
 *     Left *TreeNode
 *     Right *TreeNode
 * }
 */
type Result struct {
    node  *TreeNode
    depth int
    // 记录最近公共祖先节点 node
    // 记录以 node 为根的二叉树最大深度
}

func subtreeWithAllDeepest(root *TreeNode) *TreeNode {
    res := maxDepth(root)
    return res.node
}

// 定义：输入一棵二叉树，返回该二叉树的最大深度以及最深叶子节点的最近公共祖先节点
func maxDepth(root *TreeNode) Result {
    if root == nil {
        return Result{nil, 0}
    }
    left := maxDepth(root.Left)
    right := maxDepth(root.Right)
    if left.depth == right.depth {
        // 当左右子树的最大深度相同时，这个根节点是新的最近公共祖先
        // 以当前 root 节点为根的子树深度是子树深度 + 1
        return Result{root, left.depth + 1}
    }
    // 左右子树的深度不同，则最近公共祖先在 depth 较大的一边
    res := left
    if right.depth > left.depth {
        res = right
    }
    // 正确维护二叉树的最大深度
    res.depth++

    return res
}
```